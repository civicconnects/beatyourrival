# Package Name Change Guide

## From: `com.example.beatrivals_app`
## To: `com.civicconnects.beatrivals`

⚠️ **IMPORTANT**: Do this change carefully. Test thoroughly after changing!

---

## Files That MUST Be Changed (5 Files)

### ✅ **1. android/app/build.gradle.kts** (2 occurrences)

**Location**: Lines 14 and 29

**BEFORE**:
```kotlin
android {
    namespace = "com.example.beatrivals_app"  // ← CHANGE THIS (Line 14)
    
    defaultConfig {
        applicationId = "com.example.beatrivals_app"  // ← CHANGE THIS (Line 29)
    }
}
```

**AFTER**:
```kotlin
android {
    namespace = "com.civicconnects.beatrivals"  // ← CHANGED
    
    defaultConfig {
        applicationId = "com.civicconnects.beatrivals"  // ← CHANGED
    }
}
```

---

### ✅ **2. android/app/src/main/AndroidManifest.xml** (1 occurrence)

**Location**: Line 2

**BEFORE**:
```xml
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.beatrivals_app">  <!-- ← CHANGE THIS -->
```

**AFTER**:
```xml
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.civicconnects.beatrivals">  <!-- ← CHANGED -->
```

---

### ✅ **3. android/app/src/main/kotlin/.../MainActivity.kt** (1 occurrence + folder rename)

**Current File Path**:
```
android/app/src/main/kotlin/com/example/beatrivals_app/MainActivity.kt
```

**STEP 1: Update package declaration in MainActivity.kt**

**BEFORE**:
```kotlin
package com.example.beatrivals_app  // ← CHANGE THIS

import io.flutter.embedding.android.FlutterActivity

class MainActivity: FlutterActivity() {
}
```

**AFTER**:
```kotlin
package com.civicconnects.beatrivals  // ← CHANGED

import io.flutter.embedding.android.FlutterActivity

class MainActivity: FlutterActivity() {
}
```

**STEP 2: Rename the folder structure**

You need to move the file from:
```
android/app/src/main/kotlin/com/example/beatrivals_app/
```

To:
```
android/app/src/main/kotlin/com/civicconnects/beatrivals/
```

**How to do this in VS Code**:

1. **Create new folders**:
   - Right-click on `kotlin` folder
   - New Folder → `civicconnects`
   - Right-click on `civicconnects` folder
   - New Folder → `beatrivals`

2. **Move MainActivity.kt**:
   - Drag `MainActivity.kt` from old location to new location
   - Or copy/paste the file

3. **Delete old folders** (after confirming the new file works):
   - Delete `android/app/src/main/kotlin/com/example/beatrivals_app/`
   - Delete `android/app/src/main/kotlin/com/example/` (if empty)
   - Delete `android/app/src/main/kotlin/com/` (if empty)

**Final Structure**:
```
android/app/src/main/kotlin/
└── com/
    └── civicconnects/
        └── beatrivals/
            └── MainActivity.kt
```

---

### ⚠️ **4. android/app/google-services.json** (1 occurrence)

**CRITICAL**: You need to **REGENERATE** this file from Firebase Console!

**Current content** (Line 12):
```json
"package_name": "com.example.beatrivals_app"  // ← This needs to match
```

**Why you can't just edit it**:
- This file is generated by Firebase
- It contains API keys tied to the package name
- If you manually edit it, Firebase won't work correctly

**What to do**:

**Option A: Add a NEW Android app in Firebase (RECOMMENDED)**
1. Go to Firebase Console: https://console.firebase.google.com/
2. Select project "beatrivals-d8d2c"
3. Click "Add app" → Android
4. Enter package name: `com.civicconnects.beatrivals`
5. Download the NEW `google-services.json`
6. Replace the old one

**Option B: Keep both package names (for transition period)**
1. Add new Android app with `com.civicconnects.beatrivals`
2. Download new `google-services.json`
3. Keep testing with new package name
4. Once stable, remove old app from Firebase

---

### ✅ **5. pubspec.yaml** (OPTIONAL but recommended)

**Location**: Line 1

**BEFORE**:
```yaml
name: beatrivals_app  # ← This is fine, but can change for consistency
```

**AFTER** (optional):
```yaml
name: beatrivals  # ← Simplified, matches new package name
```

**Note**: This doesn't affect Android/iOS package names, it's just the Dart package name.

---

## iOS Package Name Changes

For iOS, you need to change the Bundle Identifier. This is done in **Xcode** (requires Mac):

1. Open `ios/Runner.xcworkspace` in Xcode
2. Select "Runner" project in left sidebar
3. Select "Runner" target
4. Go to "General" tab
5. Under "Identity", change Bundle Identifier:
   - From: `com.example.beatrivalsApp`
   - To: `com.civicconnects.beatrivals`

**Since you're on Windows**, you can skip this for now and do it later when you have Mac access.

---

## Step-by-Step Process (Recommended Order)

### Phase 1: Preparation
1. [ ] **Commit all current changes** to Git
   ```bash
   git add .
   git commit -m "checkpoint: Before package name change"
   git push origin main
   ```

2. [ ] **Create a new branch** (safety net)
   ```bash
   git checkout -b package-name-change
   ```

### Phase 2: Code Changes
3. [ ] **Update android/app/build.gradle.kts** (2 changes)
4. [ ] **Update android/app/src/main/AndroidManifest.xml** (1 change)
5. [ ] **Update MainActivity.kt** package declaration (1 change)
6. [ ] **Create new folder structure** in kotlin directory
7. [ ] **Move MainActivity.kt** to new folder
8. [ ] **Delete old kotlin folders** (com/example/beatrivals_app)

### Phase 3: Firebase Changes
9. [ ] **Go to Firebase Console**
10. [ ] **Add new Android app** with package name `com.civicconnects.beatrivals`
11. [ ] **Download NEW google-services.json**
12. [ ] **Replace old google-services.json** with new one

### Phase 4: Testing
13. [ ] **Clean build**
    ```bash
    flutter clean
    flutter pub get
    ```

14. [ ] **Try building**
    ```bash
    flutter build apk --debug
    ```

15. [ ] **Fix any errors** that appear

16. [ ] **Test on device/emulator**
    ```bash
    flutter run
    ```

17. [ ] **Verify Firebase works**:
    - Test login
    - Test registration
    - Test Firestore reads/writes

### Phase 5: Finalize
18. [ ] **Commit changes**
    ```bash
    git add .
    git commit -m "refactor: Change package name from com.example to com.civicconnects"
    git push origin package-name-change
    ```

19. [ ] **Merge to main** (after testing)
    ```bash
    git checkout main
    git merge package-name-change
    git push origin main
    ```

---

## ⚠️ Common Issues After Package Name Change

### Issue 1: "Package does not exist" error
**Cause**: Folder structure doesn't match package name
**Fix**: Ensure MainActivity.kt is in correct folder path

### Issue 2: Firebase not connecting
**Cause**: google-services.json doesn't match new package name
**Fix**: Download new config from Firebase Console

### Issue 3: Build fails with "namespace conflict"
**Cause**: Old build artifacts cached
**Fix**: 
```bash
flutter clean
cd android && ./gradlew clean
cd .. && flutter pub get
flutter build apk --debug
```

### Issue 4: App crashes on launch
**Cause**: Firebase configuration mismatch
**Fix**: Verify google-services.json has correct package_name

---

## When to Do This Change?

### ❌ **DON'T Change If**:
- You're actively testing and everything works
- You haven't backed up your code
- You're about to submit to stores (wait until after)

### ✅ **DO Change If**:
- You're preparing for production release
- You want a proper domain-based package name
- You have time to test thoroughly after changing

---

## Alternative: Keep Current Package Name

**Important**: You actually **CAN** publish with `com.example.beatrivals_app`!

The "example" domain is just a convention. Google Play doesn't technically require you to own the domain. However:

**Pros of keeping current name**:
- ✅ No code changes needed
- ✅ Firebase already configured
- ✅ Less risk of breaking things

**Cons of keeping current name**:
- ❌ Looks unprofessional
- ❌ May confuse users
- ❌ Can't change it easily after publishing

**Recommendation**: Change it NOW before publishing. It's much harder to change after the app is live.

---

## Summary: Files to Change

| File | Path | Changes |
|------|------|---------|
| 1 | `android/app/build.gradle.kts` | 2 occurrences |
| 2 | `android/app/src/main/AndroidManifest.xml` | 1 occurrence |
| 3 | `android/app/src/main/kotlin/.../MainActivity.kt` | 1 occurrence + folder rename |
| 4 | `android/app/google-services.json` | Regenerate from Firebase |
| 5 | `pubspec.yaml` | Optional (package name) |

**Total manual changes**: 4 occurrences + 1 folder rename + 1 Firebase regeneration

---

**Document Created**: December 12, 2025  
**Status**: Ready to use when you decide to change package name
